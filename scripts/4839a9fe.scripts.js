!function(){"use strict";angular.module("boxpoolApp",["ngCookies","pageService","categoryService","productService","ui.bootstrap"]).constant("MONGOLAB_APIKEY","503f0450e4b04102cdfdc589").constant("PASSWORD","kristal").config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/login",{templateUrl:"views/login.html"}).when("/products",{templateUrl:"views/product_list_full.html",controller:"ProductListCtrl"}).when("/pages/new",{templateUrl:"views/page_detail.html",controller:"PageCreateCtrl"}).when("/pages/:pageID",{templateUrl:"views/page_detail.html",controller:"PageEditCtrl"}).when("/pages",{templateUrl:"views/page_list.html",controller:"PageListCtrl"}).when("/categories/new",{templateUrl:"views/category_detail.html",controller:"CategoryCreateCtrl"}).when("/categories/:categoryID",{templateUrl:"views/category_detail.html",controller:"CategoryEditCtrl"}).when("/categories",{templateUrl:"views/category_list.html",controller:"CategoryListCtrl"}).when("/products/new",{templateUrl:"views/product_detail.html",controller:"ProductCreateCtrl"}).when("/products/:productID",{templateUrl:"views/product_detail.html",controller:"ProductEditCtrl"}).when("/edit-products",{templateUrl:"views/product_list.html",controller:"ProductListCtrl"}).otherwise({redirectTo:"/"})}]).factory("categoryList",["Category","$q","$filter",function(a,b,c){var d;return d=b.defer(),a.query(function(a){return d.resolve(c("orderBy")(a,"name"))}),d.promise}])}.call(this),function(){"use strict";angular.module("boxpoolApp").controller("AppCtrl",["$scope","$location","Page","$cookies","PASSWORD",function(a,b,c,d,e){return a.page={},a.admin=d.admin,a.active=function(a){var c;return c=a===b.path()},a.login=function(){return a.admin="kristal"===a.page.username&&a.page.password===e,a.admin?(d.admin="admin",a.flash="",b.path("#/")):(d.admin="",a.flash="Invalid Login")},a.logout=function(){return d.admin="",a.admin=!!d.admin,b.path("#/")}}]).controller("MainCtrl",["$scope","$location","Page","$cookies","PASSWORD",function(a,b,c){return a.updateHome=function(){return c.query({name:"home"},function(b){return a.page=b[0]})},a.updateHome()}])}.call(this),function(){"use strict";var a;a=angular.module("boxpoolApp"),a.controller("PageListCtrl",["$scope","Page",function(a,b){return a.pages=b.query()}]),a.controller("PageEditCtrl",["$scope","Page","$routeParams","$location",function(a,b,c,d){return b.get({id:c.pageID},function(c){return self.original=c,a.page=new b(self.original)}),a.isClean=function(){return angular.equals(self.original,a.page)},a.destroy=function(){return confirm("Are you sure?")?self.original.destroy(function(){return d.path("/pages")}):void 0},a.save=function(){return a.page.update(function(){return self.original=a.page,a.page=new b(self.original),d.path("/pages/"+a.page._id.$oid)})}}]),a.controller("PageCreateCtrl",["$scope","Page","$location",function(a,b,c){return a.save=function(){return b.save(a.page,function(a){return c.path("/pages/"+a._id.$oid)})}}])}.call(this),function(){angular.module("pageService",["ngResource"]).factory("Page",["$resource","MONGOLAB_APIKEY",function(a,b){var c,d,e;return e="https://api.mongolab.com/api/1/databases/dmo/collections/pages/:id",d=b,c=a(e,{apiKey:d},{update:{method:"PUT"},destroy:{method:"DELETE"}}),c.prototype.update=function(a,b){return c.update({id:this._id.$oid},angular.extend({},this,{_id:void 0}),a,b)},c.prototype.destroy=function(a,b){return c.remove({id:this._id.$oid},a,b)},c}])}.call(this),function(){"use strict";var a;a=angular.module("boxpoolApp"),a.controller("CategoryListCtrl",["$scope","Category",function(a,b){return a.categories=b.query()}]),a.controller("CategoryEditCtrl",["$scope","Category","$routeParams","$location",function(a,b,c,d){return b.get({id:c.categoryID},function(c){return self.original=c,a.category=new b(self.original)}),a.isClean=function(){return angular.equals(self.original,a.category)},a.destroy=function(){return confirm("Are you sure?")?self.original.destroy(function(){return d.path("/categories")}):void 0},a.save=function(){return a.category.update(function(){return self.original=a.category,a.category=new b(self.original),d.path("/categories/"+a.category._id.$oid)})}}]),a.controller("CategoryCreateCtrl",["$scope","Category","$location",function(a,b,c){return a.save=function(){return b.save(a.category,function(a){return c.path("/categories/"+a._id.$oid)})}}])}.call(this),function(){angular.module("categoryService",["ngResource"]).factory("Category",["$resource","MONGOLAB_APIKEY",function(a,b){var c,d,e;return e="https://api.mongolab.com/api/1/databases/dmo/collections/categories/:id",d=b,c=a(e,{apiKey:d},{update:{method:"PUT"},destroy:{method:"DELETE"}}),c.prototype.update=function(a,b){return c.update({id:this._id.$oid},angular.extend({},this,{_id:void 0}),a,b)},c.prototype.destroy=function(a,b){return c.remove({id:this._id.$oid},a,b)},c}])}.call(this),function(){"use strict";var a;a=angular.module("boxpoolApp"),a.controller("ProductListCtrl",["$scope","Product","Category",function(a,b,c){return a.radio={},c.query(function(b){return a.categories=b,a.radio.category=a.categories[0].code||""}),b.query(function(b){return a.products=b})}]),a.controller("ProductEditCtrl",["$scope","Category","Product","$routeParams","$location","$filter",function(a,b,c,d,e){return a.options=b.query(),c.get({id:d.productID},function(b){var d;return self.original=b,a.product=new c(self.original),(d=a.product).category||(d.category=a.options[0].code)}),a.isClean=function(){return angular.equals(self.original,a.product)},a.destroy=function(){return confirm("Are you sure?")?self.original.destroy(function(){return e.path("/products")}):void 0},a.save=function(){return a.product.update(function(){return self.original=a.product,a.product=new c(self.original),e.path("/products/"+a.product._id.$oid)})}}]),a.controller("ProductCreateCtrl",["$scope","Product","$location","Category",function(a,b,c,d){return a.product={},d.query(function(b){var c;return a.options=b,(c=a.product).category||(c.category=a.options[0].code)}),a.save=function(){return b.save(a.product,function(a){return c.path("/products/"+a._id.$oid)})}}])}.call(this),function(){angular.module("productService",["ngResource"]).factory("Product",["$resource","MONGOLAB_APIKEY",function(a,b){var c,d,e;return e="https://api.mongolab.com/api/1/databases/dmo/collections/products/:id",d=b,c=a(e,{apiKey:d},{update:{method:"PUT"},destroy:{method:"DELETE"}}),c.prototype.update=function(a,b){return c.update({id:this._id.$oid},angular.extend({},this,{_id:void 0}),a,b)},c.prototype.destroy=function(a,b){return c.remove({id:this._id.$oid},a,b)},c}])}.call(this);